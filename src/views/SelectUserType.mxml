<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:components="views.components.*" 
		xmlns:mx="library://ns.adobe.com/flex/mx" 
		remove="exit(event)" creationComplete="created(event)"
		
		>
	<fx:Script>
		<![CDATA[
			import events.KioskError;
			import events.KioskEvent;
			import events.UserEvent;
			import events.ViewEvent;
			
			import model.ML;
			
			import mx.events.FlexEvent;
			import mx.validators.Validator;
			
			import spark.events.IndexChangeEvent;
			
			protected var validatorArr:Array;
			protected var timer:Timer;
			
			public function created(event:FlexEvent=null):void
			{
				this.addEventListener( Event.INIT, init);
			}
			public function init(event:Event=null):void
			{
				trace("*** INIT SELECTUSERTYPE ***");
				validatorArr = new Array();
				validatorArr.push(validateTerms);
				timer = new Timer(100,1);
				timer.addEventListener(TimerEvent.TIMER_COMPLETE, start);
				timer.start();	
			}
			public function exit( e:Event = null):void
			{
				trace("*** EXIT SELECTUSERTYPE ***");
			}
			protected function start( e:TimerEvent ):void
			{
				timer.stop();
				timer = null;
				termsCheck.selected = false;
				marketCheck.selected = false;
				termsCheck.errorString = "";
				marketCheck.errorString = "";
				
				//validatorArr.push(validateMarketing);
			//	this.marketCheck.selected = this.termsCheck.selected = false;
			}
			protected function isValid():Boolean
			{
				var validatorErrorArray:Array = Validator.validateAll(validatorArr);
				return validatorErrorArray.length == 0;
			}
			
			protected function facebook(e:Event=null):void
			{
				if (isValid())
				{
					this.parentApplication.dispatchEvent( new UserEvent( UserEvent.OPTIN_TERMS, termsCheck.selected ? "true" : "false" ))
					this.parentApplication.dispatchEvent( new UserEvent( UserEvent.OPTIN_MARKETING, marketCheck.selected ? "true" : "false" ))
					this.parentApplication.dispatchEvent( new ViewEvent( ViewEvent.LOCATION_FACEBOOK ));
				}
			}
			protected function standard(e:Event=null):void
			{
					if (isValid())
					{
						this.parentApplication.dispatchEvent( new UserEvent( UserEvent.OPTIN_TERMS, termsCheck.selected ? "true" : "false" ))
						this.parentApplication.dispatchEvent( new UserEvent( UserEvent.OPTIN_MARKETING, marketCheck.selected ? "true" : "false" ))
						this.parentApplication.dispatchEvent( new ViewEvent( ViewEvent.LOCATION_STANDARD_REGISTRATION ));
					}
			}
			
			protected function tandcd_clickHandler(event:MouseEvent):void
			{
					this.parentApplication.dispatchEvent(new KioskEvent(KioskEvent.TERMS_NOTIFY));
			}
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<mx:StringValidator id="validateTerms"
						   source="{termsCheck}"
						   required="true"
						   property="selected" maxLength="4" requiredFieldError="You must agree the terms of use" tooLongError="You must agree to the Terms of Use.">
		</mx:StringValidator>
<!--		<mx:StringValidator id="validateMarketing"
							source="{marketCheck}"
							required="true"
							property="selected" maxLength="4" requiredFieldError="{ML.t('You must accept marketing approach from Vodafone." tooLongError="You must accept marketing approach from Vodafone.')}">
		</mx:StringValidator>-->
	</fx:Declarations>
	<s:VGroup horizontalAlign="center" verticalAlign="middle" width="100%" height="100%">
		
		<components:facebookBtn  click="facebook()"  />
		<s:Spacer height="50" />
		<s:Button label="I donâ€™t have a Facebook account" click="standard()" skinClass="skins.vodafoneButton"/>
		<s:Spacer height="50" />
		
		<s:VGroup width="100%" horizontalAlign="center">
			<s:VGroup  width="500">
				
			<s:CheckBox id="termsCheck" label="I agree to the Terms and Conditions"  skinClass="skins.vodafoneCheckBox" />
			<s:HGroup width="600">
				<s:Label styleName="smallprint" text="By tapping submit you agree to the"/>
				<s:Label  styleName="smallprintLink" text="Terms And Conditions" click="tandcd_clickHandler(event)" />
			</s:HGroup>

			<s:Spacer height="30" />
			<s:CheckBox id="marketCheck" label="I accept marketing approach from Vodafone"  skinClass="skins.vodafoneCheckBox"/>
			<s:Label styleName="verysmallprint" width="600">
				<s:text>I agree that the specified personal information of Vodafone Hungary\'s own marketing activities, direct marketing, market research and information for telephone or other electronic means (eg SMS, MMS, E-mail), an automated calling system, or by mail use. I understand that Vodafone Hungary 1476 Budapest, PO Box: 350 postal and electronic addresses through ugyfelszolgalat.hu @ vodafone.com ask the registered personal information deleted, modified, or treated with the data to information.</s:text>
			</s:Label>
				
			</s:VGroup>
			
		</s:VGroup>

	</s:VGroup>
</s:Group>
