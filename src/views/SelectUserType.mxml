<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:components="views.components.*" 
		xmlns:mx="library://ns.adobe.com/flex/mx" 
		width="100%" height="100%"
		remove="exit(event)" creationComplete="created(event)"
		>
	<fx:Script>
		<![CDATA[
			import com.utils.Console;
			
			import mx.controls.ToolTip;
			import mx.events.FlexEvent;
			
			import mx.validators.Validator;
			
			import spark.events.IndexChangeEvent;
			
			import events.KioskError;
			import events.KioskEvent;
			import events.UserEvent;
			import events.ViewEvent;
			
			import model.ML;
			
			import skins.vodafoneButton;
			
			protected var validatorArr:Array;
			protected var timer:Timer;
			
			public function created(event:FlexEvent=null):void
			{
				this.addEventListener( Event.INIT, init);
			}
			public function init(event:Event=null):void
			{
				Console.log("*** INIT SELECTUSERTYPE ***", this);
				validatorArr = new Array();
				validatorArr.push(validateTerms);
				timer = new Timer(100,1);
				timer.addEventListener(TimerEvent.TIMER_COMPLETE, start);
				timer.start();	
			}
			public function exit( e:Event = null):void
			{
				Console.log("*** EXIT SELECTUSERTYPE ***", this);
			}
			protected function start( e:TimerEvent ):void
			{
				timer.stop();
				timer = null;
				termsCheck.selected = false;
			//	marketCheck.selected = false;
				termsCheck.errorString = "";
			//	marketCheck.errorString = "";
				
				//validatorArr.push(validateMarketing);
			//	this.marketCheck.selected = this.termsCheck.selected = false;
			}
			protected function isValid():Boolean
			{
				var validatorErrorArray:Array = Validator.validateAll(validatorArr);
				
				return validatorErrorArray.length == 0;
				
			}
			
			protected function facebook(e:Event=null):void
			{
				if (isValid())
				{
					this.parentApplication.dispatchEvent( new UserEvent( UserEvent.OPTIN_TERMS, termsCheck.selected ? "true" : "false" ))
				//	this.parentApplication.dispatchEvent( new UserEvent( UserEvent.OPTIN_MARKETING, marketCheck.selected ? "true" : "false" ))
					this.parentApplication.dispatchEvent( new ViewEvent( ViewEvent.LOCATION_FACEBOOK ));
				}
			}
			protected function standard(e:Event=null):void
			{
					if (isValid())
					{
						this.parentApplication.dispatchEvent( new UserEvent( UserEvent.OPTIN_TERMS, termsCheck.selected ? "true" : "false" ))
				//		this.parentApplication.dispatchEvent( new UserEvent( UserEvent.OPTIN_MARKETING, marketCheck.selected ? "true" : "false" ))
						this.parentApplication.dispatchEvent( new ViewEvent( ViewEvent.LOCATION_STANDARD_REGISTRATION ));
					}
			}
			
			protected function tandcd_clickHandler(event:MouseEvent):void
			{
					this.parentApplication.dispatchEvent(new KioskEvent(KioskEvent.TERMS_NOTIFY));
			}
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
		<mx:StringValidator id="validateTerms"
						   source="{termsCheck}"
						   required="true"
						   property="selected" 
						   maxLength="4" 
						   requiredFieldError="You must agree the terms of use" 
						   tooLongError="You must agree to the Terms of Use.">
		</mx:StringValidator>
		
		<!--s:Button x="259" y="591" label="Terms And Conditions"  click="tandcd_clickHandler(event)" skinClass="skins.vodafoneButton"/-->
<!--		<mx:StringValidator id="validateMarketing"
							source="{marketCheck}"
							required="true"
							property="selected" maxLength="4" requiredFieldError="{ML.t('You must accept marketing approach from Vodafone." tooLongError="You must accept marketing approach from Vodafone.')}">
		</mx:StringValidator>-->
	</fx:Declarations>
	
	
	<s:VGroup horizontalAlign="center" width="100%" height="100%">
		<s:Spacer height="330" />
		<s:Label id="frontMessage" horizontalCenter="0"   
				 text="CHOOSE YOUR METHOD OF REGISTRATION" />
		<s:Spacer height="21" />
		<s:HGroup width="417">
			<s:CheckBox id="termsCheck" width="145" styleName="tcaccept" label="ACCEPT " skinClass="skins.BarclaysCheckBox" />
			<s:Label color="0x00AEEF" styleName="tclink" paddingTop="4" buttonMode="true" text="TERMS AND CONDITIONS" click="tandcd_clickHandler(event)" />
		</s:HGroup>
		<s:Spacer height="75" />

		<!--<s:Button label="FACEBOOK" width="227" click="facebook()" skinClass="skins.barclaysButton"/>-->
		<s:Spacer height="15" />
		<s:Button label="EMAIL" width="227" click="standard()" skinClass="skins.barclaysButton"/>

	</s:VGroup>
	
</s:Group>
